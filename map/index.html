<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="三类事件发生时空点和媒体传播广度">
<title>三类事件发生时空点和媒体传播广度</title>
<script src="http://libs.baidu.com/jquery/2.1.1/jquery.min.js"></script>
</head>

<body>
    <h4><font color="black">&nbsp;&nbsp;&nbsp;三类事件发生时空点和媒体传播广度</h4>
    <h5><font color="green">&nbsp;&nbsp;&nbsp;绿色为公交车爆炸事件<font color="orange">&nbsp;&nbsp;&nbsp;黄色为暴力恐慌事件<font color="red">&nbsp;&nbsp;&nbsp;绿色为校园砍杀事件</h4>
    <div id="main" style="height:600px"></div>
    <script src="http://echarts.baidu.com/build/dist/echarts-all.js"></script>
    <script type="text/javascript">

    var myChart = echarts.init(document.getElementById('main')); 
    option = {
        timeline:{
            data:[],
            label : {
                formatter : function(s) {
                    return s;
                }
            },
            type : "number",
            notMerge : true,
            autoPlay : true,
            playInterval : 1500
        },
        options:[
        ]
    };

    for(var i=1;i<=70;i++){
        option.timeline.data.push(i.toString())
        var inner = {
            tooltip : {'trigger':'item'},
            toolbox : {
                'show':true, 
                'feature':{
                    'mark':{'show':true},
                    'dataView':{'show':true,'readOnly':false},
                    'restore':{'show':true},
                    'saveAsImage':{'show':true}
                }
            },
            dataRange: {
                min : 0,
                max : 100,
                calculable : true,
                color : ['red','orange','yellow','lime','aqua'],
                show : false
            },
            series : [
                {
                    name: '全国',
                    type: 'map',
                    roam: false,
                    hoverable: false,
                    mapType: 'china',
                    itemStyle:{
                        normal:{
                            borderColor:'#FFFFFF',
                            borderWidth:0.5,
                            areaStyle:{
                                color: '#3399FF'
                            },
                            label:{show:true}
                        },
                        emphasis:{label:{show:true},textStyle:{color:'#FFFFFF'}}
                    },
                    data:[],
                    geoCoord: {
                        '临沧市': [100.08,23.88],
                        '大理市': [100.23,25.6],
                        '丽江市': [100.23,26.88],
                        '玉溪市': [102.55,24.35],
                        '武威市': [102.63,37.93],
                        '昆明市': [102.72,25.05],
                        '雅安市': [103.0,29.98],
                        '昭通市': [103.72,27.33],
                        '曲靖市': [103.8,25.5],
                        '兰州市': [103.82,36.07],
                        '眉山市': [103.83,30.05],
                        '成都市': [104.07,30.67],
                        '白银市': [104.18,36.55],
                        '宜宾市': [104.62,28.77],
                        '资阳市': [104.65,30.12],
                        '绵阳市': [104.73,31.47],
                        '自贡市': [104.78,29.35],
                        '内江市': [105.05,29.58],
                        '毕节市': [105.28,27.3],
                        '泸州市': [105.43,28.87],
                        '遂宁市': [105.57,30.52],
                        '广元市': [105.83,32.43],
                        '南充市': [106.08,30.78],
                        '吴忠市': [106.2,37.98],
                        '银川市': [106.28,38.47],
                        '贵阳市': [106.63,26.65],
                        '广安市': [106.63,30.47],
                        '平凉市': [106.67,35.55],
                        '遵义市': [106.92,27.73],
                        '汉中市': [107.02,33.07],
                        '宝鸡市': [107.13,34.37],
                        '达州市': [107.5,31.22],
                        '河池市': [108.07,24.7],
                        '南宁市': [108.37,22.82],
                        '东方市': [108.63,19.1],
                        '咸阳市': [108.7,34.33],
                        '西安市': [108.93,34.27],
                        '安康市': [109.02,32.68],
                        '北海市': [109.12,21.48],
                        '柳州市': [109.42,24.33],
                        '延安市': [109.48,36.6],
                        '三亚市': [109.5,18.25],
                        '渭南市': [109.5,34.5],
                        '儋州市': [109.57,19.52],
                        '贵港市': [109.6,23.1],
                        '榆林市': [109.73,38.28],
                        '包头市': [109.83,40.65],
                        '商洛市': [109.93,33.87],
                        '怀化市': [110.0,27.57],
                        '玉林市': [110.17,22.63],
                        '桂林市': [110.28,25.28],
                        '海口市': [110.32,20.03],
                        '湛江市': [110.35,21.27],
                        '琼海市': [110.47,19.25],
                        '十堰市': [110.78,32.65],
                        '茂名市': [110.92,21.67],
                        '梧州市': [111.27,23.48],
                        '宜昌市': [111.28,30.7],
                        '邵阳市': [111.47,27.25],
                        '贺州市': [111.55,24.42],
                        '常德市': [111.68,29.05],
                        '阳江市': [111.98,21.87],
                        '娄底市': [112.0,27.73],
                        '云浮市': [112.03,22.92],
                        '荆门市': [112.2,31.03],
                        '荆州市': [112.23,30.33],
                        '朔州市': [112.43,39.33],
                        '洛阳市': [112.45,34.62],
                        '南阳市': [112.52,33.0],
                        '太原市': [112.55,37.87],
                        '衡阳市': [112.57,26.9],
                        '忻州市': [112.73,38.42],
                        '晋城市': [112.83,35.5],
                        '湘潭市': [112.93,27.83],
                        '长沙市': [112.93,28.23],
                        '江门市': [113.08,22.58],
                        '佛山市': [113.12,23.02],
                        '岳阳市': [113.12,29.37],
                        '株洲市': [113.13,27.83],
                        '天门市': [113.17,30.67],
                        '焦作市': [113.25,35.22],
                        '广州市': [113.27,23.13],
                        '大同市': [113.3,40.08],
                        '中山市': [113.38,22.52],
                        '珠海市': [113.57,22.27],
                        '韶关市': [113.6,24.82],
                        '郑州市': [113.62,34.75],
                        '东莞市': [113.75,23.05],
                        '漯河市': [114.02,33.58],
                        '深圳市': [114.05,22.55],
                        '信阳市': [114.07,32.13],
                        '武汉市': [114.3,30.6],
                        '开封市': [114.3,34.8],
                        '宜春市': [114.38,27.8],
                        '安阳市': [114.38,36.1],
                        '惠州市': [114.42,23.12],
                        '邯郸市': [114.48,36.62],
                        '邢台市': [114.48,37.07],
                        '周口市': [114.65,33.62],
                        '河源市': [114.7,23.73],
                        '鄂州市': [114.88,30.4],
                        '新余市': [114.92,27.82],
                        '黄石市': [115.03,30.2],
                        '汕尾市': [115.37,22.78],
                        '商丘市': [115.65,34.45],
                        '衡水市': [115.68,37.73],
                        '阜阳市': [115.82,32.9],
                        '南昌市': [115.85,28.68],
                        '聊城市': [115.98,36.45],
                        '九江市': [116.0,29.7],
                        '德州市': [116.3,37.45],
                        '抚州市': [116.35,28.0],
                        '六安市': [116.5,31.77],
                        '济宁市': [116.58,35.42],
                        '廊坊市': [116.7,39.52],
                        '沧州市': [116.83,38.3],
                        '宿州市': [116.98,33.63],
                        '济南市': [116.98,36.67],
                        '龙岩市': [117.03,25.1],
                        '泰安市': [117.08,36.2],
                        '徐州市': [117.18,34.27],
                        '合肥市': [117.25,31.83],
                        '枣庄市': [117.32,34.82],
                        '池州市': [117.48,30.67],
                        '三明市': [117.62,26.27],
                        '漳州市': [117.65,24.52],
                        '铜陵市': [117.82,30.93],
                        '承德市': [117.93,40.97],
                        '上饶市': [117.97,28.45],
                        '淄博市': [118.05,36.82],
                        '厦门市': [118.08,24.48],
                        '南平市': [118.17,26.65],
                        '宿迁市': [118.28,33.97],
                        '滁州市': [118.32,32.3],
                        '黄山市': [118.33,29.72],
                        '临沂市': [118.35,35.05],
                        '芜湖市': [118.38,31.33],
                        '泉州市': [118.67,24.88],
                        '南京市': [118.78,32.07],
                        '衢州市': [118.87,28.93],
                        '赤峰市': [118.92,42.27],
                        '莆田市': [119.0,25.43],
                        '淮安市': [119.02,33.62],
                        '潍坊市': [119.15,36.7],
                        '福州市': [119.3,26.08],
                        '扬州市': [119.4,32.4],
                        '镇江市': [119.45,32.2],
                        '宁德市': [119.52,26.67],
                        '日照市': [119.52,35.42],
                        '金华市': [119.65,29.08],
                        '丽水市': [119.92,28.45],
                        '常州市': [119.95,31.78],
                        '湖州市': [120.08,30.9],
                        '杭州市': [120.15,30.28],
                        '台南市': [120.2,23.0],
                        '高雄市': [120.28,22.62],
                        '无锡市': [120.3,31.57],
                        '青岛市': [120.38,36.07],
                        '朝阳市': [120.45,41.57],
                        '绍兴市': [120.57,30.0],
                        '苏州市': [120.58,31.3],
                        '温州市': [120.7,28.0],
                        '嘉兴市': [120.75,30.75],
                        '南通市': [120.88,31.98],
                        '锦州市': [121.13,41.1],
                        '台州市': [121.43,28.68],
                        '烟台市': [121.43,37.45],
                        '台北市': [121.5,25.03],
                        '宁波市': [121.55,29.88],
                        '大连市': [121.62,38.92],
                        '舟山市': [122.2,30.0],
                        '通辽市': [122.27,43.62],
                        '鞍山市': [122.98,41.1],
                        '辽阳市': [123.17,41.27],
                        '沈阳市': [123.43,41.8],
                        '抚顺市': [123.98,41.88],
                        '松原市': [124.82,45.13],
                        '大庆市': [125.03,46.58],
                        '辽源市': [125.13,42.88],
                        '长春市': [125.32,43.9],
                        '通化市': [125.93,41.73],
                        '吉林市': [126.55,43.83],
                        '绥化市': [126.98,46.63],
                        '鹤岗市': [130.27,47.33],
                        '喀什市': [75.98,39.47],
                        '和田市': [79.92,37.12],
                        '昌吉市': [87.3,44.02],
                        '哈密市': [93.52,42.83],
                        '酒泉市': [98.52,39.75],
                        '攀枝花市': [101.72,26.58],
                        '六盘水市': [104.83,26.6],
                        '张家界市': [110.47,29.13],
                        '石家庄市': [114.52,38.05],
                        '张家口市': [114.88,40.82],
                        '葫芦岛市': [120.83,40.72],
                        '哈尔滨市': [126.53,45.8],
                        '七台河市': [130.95,45.78],
                        '双鸭山市': [131.15,46.63],
                        '阿克苏市': [80.27,41.17],
                        '石河子市': [86.03,44.3],
                        '五家渠市': [87.53,44.17],
                        '吐鲁番市': [89.17,42.95],
                        '呼和浩特市': [111.73,40.83],
                        '乌兰察布市': [113.12,40.98],
                        '呼伦贝尔市': [119.77,49.22],
                        '图木舒克市': [79.13,39.85],
                        '克拉玛依市': [84.87,45.6],
                        '乌鲁木齐市': [87.62,43.82],
                        'NULL': [0,0],
                    },
                    markPoint : {
                        symbol:'emptyCircle',
                        symbolSize : function (v){
                            return 10 + (v-(Math.ceil(v/10)-1)*10)*3
                        },
                        effect : {
                            show: true,
                            loop: true,
                            shadowBlur : 0
                        },
                        itemStyle:{
                            normal:{
                                label:{show:false}
                            }
                        },
                        data : [{"name":"NULL","value":0}]
                    }
                }
            ]
        }
        option.options.push(inner)
    }

    $.get("event_location.txt",function(text,status){
        line = text.split("\n");
        for(var i=0;i<line.length;i++){
            part = line[i].split("\t")
            var eventid = part[0]
            var tag = part[1]
            var offset = part[2]
            var media = part[3]
            var city = part[4]
            var lng = part[5]
            var lat = part[6]
            if(90 <= offset && offset < 160) {
                option.options[offset-90].series[0].markPoint.data.push({"name":city,"value":media})
            }
        }
    });

    myChart.setOption(option); 
    </script>
</body>
</html>
